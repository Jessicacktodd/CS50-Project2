{% extends "auctions/layout.html" %}

{% block body %}

{% for message in messages %}
<div class="container-fluid p-0">
  <div class="alert {{ message.tags }} alert-dismissible" role="alert" >
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="True">&times;</span>
    </button>
    {{ message }}
  </div>
</div>
{% endfor %}

{% if request.user == listing.creator and listing.is_active %}
    <form action="{% url 'close_listing' listing.id %}" method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-success">Close Listing</button>
    </form>
{% endif %}


    <h2>{{ listing.title }}</h2>

    {% if listing.image_url %}
        <img src="{{ listing.image_url }}" alt="Image for {{ listing.title }}" class="img-fluid">
    {% endif %}

    <p><strong>Description:</strong> {{ listing.description }}</p>
    <p><strong>Starting Price</strong> {{ listing.starting_bid }}</p>
    <p><strong>Current Price:</strong> {{ listing.current_price }}</p>

    {% if user.is_authenticated %}
        <form action="{% url 'place_bid' listing.id %}" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="bid">Your Bid:</label>
                <input type="number" id="bid" name="bid" step="0.01" class="form-control" placeholder="Enter your bid" required>
            </div>
            <button type="submit" class="btn btn-success">Place Bid</button>
        </form>
    {% endif %}

   
{% endblock %}